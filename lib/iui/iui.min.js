(function(){var e=20;var t=0;var n=3e4;var r=null;var a=null;var o=null;var s=0;var u=0;var l=location.hash;var f="#_";var c=[];var d=0;var v;var g=false;var m="portrait";var b="landscape";window.iui={logging:false,busy:false,animOn:true,ajaxErrHandler:null,httpHeaders:{"X-Requested-With":"XMLHttpRequest"},showPage:function(e,t){if(e){if(e==a){M("page = currentPage = "+e.id);iui.busy=false;return}if(o){o.removeAttribute("selected");y("blur",o);o=null}if(j(e,"dialog")){iui.busy=false;y("focus",e);C(e)}else{y("load",e);var i=a;y("blur",a);a=e;y("focus",e);if(i){setTimeout(H,0,i,e,t)}else{N(e,i)}}}},gotoView:function(e,t){var i,n;if(e instanceof HTMLElement){i=e;n=i.id}else{n=e;i=q(n)}if(!i)M("gotoView: node is null");if(!iui.busy){iui.busy=true;var r=c.indexOf(n);var a=r!=-1;if(a){c.splice(r)}else if(t){c.pop()}iui.showPage(i,a);return false}else{return true}},showPageById:function(e){iui.gotoView(e,false)},goBack:function(){iui.gotoView(c.slice(-2,-1)[0],false)},replacePage:function(e){gotoView(e,true)},showPageByHref:function(e,t,i,n,r){function a(e){M("xhr.readyState = "+e.readyState);if(e.readyState==4){if((e.status==200||e.status==0)&&!e.aborted){var t=document.createElement("div");t.innerHTML=e.responseText;y("beforeinsert",document.body,{fragment:t});if(n){S(n,t);iui.busy=false}else{iui.insertPages(t)}}else{iui.busy=false;if(iui.ajaxErrHandler){iui.ajaxErrHandler("Error contacting server, please try again later")}}if(r){setTimeout(r,1e3,true)}}}if(!iui.busy){iui.busy=true;iui.ajax(e,t,i,a)}else{r()}},ajax:function(e,t,i,r){var a=new XMLHttpRequest;i=i?i.toUpperCase():"GET";if(t&&i=="GET"){e=e+"?"+iui.param(t)}a.open(i,e,true);if(r){a.onreadystatechange=function(){r(a)}}var o=null;if(t&&i!="GET"){a.setRequestHeader("Content-Type","application/x-www-form-urlencoded");o=iui.param(t)}for(var s in iui.httpHeaders){a.setRequestHeader(s,iui.httpHeaders[s])}a.send(o);a.requestTimer=setTimeout(u,n);return a;function u(){try{a.abort();a.aborted=true}catch(e){M(e)}}},param:function(e){var t=[];for(var i in e){var n=e[i];if(typeof n=="object"&&typeof n.length=="number"){for(var r=0;r<n.length;r++){t[t.length]=encodeURIComponent(i)+"="+encodeURIComponent(n[r])}}else{t[t.length]=encodeURIComponent(i)+"="+encodeURIComponent(n)}}return t.join("&").replace(/%20/g,"+")},insertPages:function(e){var t=e.childNodes;var i;for(var n=0;n<t.length;++n){var r=t[n];if(r.nodeType==1){if(!r.id)r.id="__"+ ++d+"__";var a=q(r.id);var o;if(a){a.parentNode.replaceChild(r,a);o=q(r.id)}else o=document.body.appendChild(r);y("afterinsert",document.body,{insertedNode:o});if(r.getAttribute("selected")=="true"||!i)i=r;--n}}y("afterinsertend",document.body,{fragment:e});if(i)iui.showPage(i)},getSelectedPage:function(){for(var e=document.body.firstChild;e;e=e.nextSibling){if(e.nodeType==1&&e.getAttribute("selected")=="true")return e}},getAllViews:function(){return document.querySelectorAll("body > *:not(.toolbar)")},isNativeUrl:function(e){for(var t=0;t<iui.nativeUrlPatterns.length;t++){if(e.match(iui.nativeUrlPatterns[t]))return true}return false},nativeUrlPatterns:[new RegExp("^http://maps.google.com/maps?"),new RegExp("^mailto:"),new RegExp("^tel:"),new RegExp("^http://www.youtube.com/watch\\?v="),new RegExp("^http://www.youtube.com/v/"),new RegExp("^javascript:"),new RegExp("^sms:"),new RegExp("^callto:")],hasClass:function(e,t){var i=new RegExp("(^|\\s)"+t+"($|\\s)");return i.exec(e.getAttribute("class"))!=null},addClass:function(e,t){if(!iui.hasClass(e,t))e.className+=" "+t},removeClass:function(e,t){if(iui.hasClass(e,t)){var i=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(i," ")}}};addEventListener("load",function(e){var t=iui.getSelectedPage();var i=w();if(t){r=t;iui.showPage(t)}if(i&&i!=t)iui.showPage(i);setTimeout(L,0);if(typeof window.onorientationchange=="object"){window.onorientationchange=E;g=true;setTimeout(E,0)}setTimeout(T,0);v=setInterval(T,300)},false);addEventListener("unload",function(e){return},false);addEventListener("click",function(e){var t=U(e.target,"a");if(t){var i=j(t,"nofollow");function n(){t.removeAttribute("selected")}if(t.href&&t.hash&&t.hash!="#"&&!t.target){p(t)}else if(t==q("backButton")){iui.goBack()}else if(t.getAttribute("type")=="submit"){var r=U(t,"form");if(r.target=="_self"){if(typeof r.onsubmit=="function"){if(r.onsubmit()==true){r.submit()}}else{r.submit()}return}_(r)}else if(t.getAttribute("type")=="cancel"){k(U(t,"form"))}else if(t.target=="_replace"){h(t,t)}else if(iui.isNativeUrl(t.href)){return}else if(t.target=="_webapp"){location.href=t.href}else if(!t.target&&t.href&&!i){h(t,null)}else return;e.preventDefault()}},true);addEventListener("click",function(e){var t=U(e.target,"div");if(t&&j(t,"toggle")){t.setAttribute("toggled",t.getAttribute("toggled")!="true");e.preventDefault()}},true);addEventListener("click",function(e){var t=U(e.target,"input");if(t&&t.type=="submit"){t.setAttribute("submitvalue",t.value)}},true);addEventListener("submit",function(e){var t=e.target;if(t.target!="_self"){e.preventDefault();_(t)}},true);function p(e){e.setAttribute("selected","true");var t=iui.gotoView(e.hash.substr(1),false);setTimeout(function(){e.removeAttribute("selected")},t?0:500)}function h(e,t){e.setAttribute("selected","progress");iui.showPageByHref(e.href,null,"GET",t,function(){e.removeAttribute("selected")})}function y(e,t,n){if(t){var r=document.createEvent("UIEvent");r.initEvent(e,false,false);if(n){for(i in n){r[i]=n[i]}}t.dispatchEvent(r)}}function w(){var e;var t=location.hash.match(/#_([^\?_]+)/);if(t)e=t[1];if(e)e=q(e);return e}function E(){var e=window.orientation;switch(e){case 0:A(m);break;case 90:case-90:A(b);break}}function T(){if(!g){if(window.innerWidth!=s||window.innerHeight!=u){s=window.innerWidth;u=window.innerHeight;var e=s<u?m:b;A(e)}}if(location.hash!=l){var t=location.hash.substr(f.length);if(t==""&&r)t=r.id;iui.showPageById(t)}}function A(e){document.body.setAttribute("orient",e);if(e==m){iui.removeClass(document.body,b);iui.addClass(document.body,m)}else if(e==b){iui.removeClass(document.body,m);iui.addClass(document.body,b)}else{iui.removeClass(document.body,m);iui.removeClass(document.body,b)}setTimeout(scrollTo,100,0,1)}function C(e){o=e;e.setAttribute("selected","true");if(j(e,"dialog"))x(e)}function x(e){e.addEventListener("click",function(e){},true)}function k(e){e.removeAttribute("selected")}function N(e,t){if(!e.id)e.id="__"+ ++d+"__";l=f+e.id;if(!t){location.replace(l)}else{location.assign(l)}c.push(e.id);var i=q("pageTitle");if(e.title)i.innerHTML=e.title;var n=e.getAttribute("ttlclass");i.className=n?n:"";if(e.localName.toLowerCase()=="form")x(e);var r=q("backButton");if(r){var a=q(c[c.length-2]);if(a&&!e.getAttribute("hideBackButton")){r.style.display="inline";r.innerHTML=a.title?a.title:"Back";var o=a.getAttribute("bbclass");r.className=o?"button "+o:"button"}else r.style.display="none"}iui.busy=false}function H(e,t,i){var n=(i?e:t).getAttribute("axis");clearInterval(v);y("beforetransition",e,{out:true});y("beforetransition",t,{out:false});if(P()&&n!="y"){B(e,t,i,r)}else{R(e,t,i,n,r)}function r(){if(!j(t,"dialog"))e.removeAttribute("selected");v=setInterval(T,300);setTimeout(N,0,t,e);e.removeEventListener("webkitTransitionEnd",r,false);y("aftertransition",e,{out:true});y("aftertransition",t,{out:false});if(i)y("unload",e)}}function P(){return iui.animOn&&typeof WebKitCSSMatrix=="object"}function R(i,n,r,a,o){if(a=="y")(r?i:n).style.top="100%";else n.style.left="100%";scrollTo(0,1);n.setAttribute("selected","true");var s=100;l();var u=setInterval(l,t);function l(){s-=e;if(s<=0){s=0;clearInterval(u);o()}if(a=="y"){r?i.style.top=100-s+"%":n.style.top=s+"%"}else{i.style.left=(r?100-s:s-100)+"%";n.style.left=(r?-s:s)+"%"}}}function B(e,t,i,n){t.style.webkitTransitionDuration="0ms";var r="translateX("+(i?"-":"")+window.innerWidth+"px)";var a="translateX("+(i?"100%":"-100%")+")";t.style.webkitTransform=r;t.setAttribute("selected","true");t.style.webkitTransitionDuration="";function o(){e.style.webkitTransform=a;t.style.webkitTransform="translateX(0%)"}e.addEventListener("webkitTransitionEnd",n,false);setTimeout(o,0)}function L(){var e=document.createElement("div");e.id="preloader";document.body.appendChild(e)}function _(e){iui.addClass(e,"progress");iui.showPageByHref(e.getAttribute("action"),I(e),e.hasAttribute("method")?e.getAttribute("method"):"GET",null,function(){iui.removeClass(e,"progress")})}function I(e){function t(e){for(var t=0;t<e.length;++t){M("input["+t+"]: "+e[t].name+" = "+e[t].value);if(e[t].name){var n=e[t];if(n.getAttribute("type")=="checkbox"&&!n.checked||n.getAttribute("type")=="radio"&&!n.checked||n.disabled){continue}if(n.getAttribute("type")=="submit"){if(n.getAttribute("submitvalue")){n.removeAttribute("submitvalue")}else{continue}}var r=i[n.name];if(r===undefined){i[n.name]=n.value}else if(r instanceof Array){r.push(n.value)}else{i[n.name]=[r,n.value]}}}}var i={};t(e.getElementsByTagName("input"));t(e.getElementsByTagName("textarea"));t(e.getElementsByTagName("select"));t(e.getElementsByTagName("button"));args_global=i;return i}function U(e,t){while(e&&(e.nodeType!=1||e.localName.toLowerCase()!=t))e=e.parentNode;return e}function j(e,t){return iui.hasClass(e,t)}function S(e,t){var i=e.parentNode;var n=e;while(i.parentNode!=document.body){i=i.parentNode;n=n.parentNode}i.removeChild(n);var r;while(t.firstChild){r=i.appendChild(t.firstChild);y("afterinsert",document.body,{insertedNode:r})}y("afterinsertend",document.body,{fragment:t})}function q(e){return document.getElementById(e)}function M(){if(window.console!=undefined&&iui.logging)console.log.apply(console,arguments)}})();